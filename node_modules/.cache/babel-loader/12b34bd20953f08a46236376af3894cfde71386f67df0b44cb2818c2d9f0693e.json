{"ast":null,"code":"var _jsxFileName = \"/Users/dimitar/Documents/projects/my_project/upload_article/src/components/likeDislike.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchLikesDislikes, incrementDislike, incrementLike } from \"../store/likesSlice/likesSlice\";\nimport axios from \"axios\";\nimport { fetchTodo } from \"../store/todoSlice/todoSlice\";\nimport { useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LikeDislike = ({\n  articleId\n}) => {\n  _s();\n  const {\n    likes,\n    dislikes\n  } = useSelector(state => state.likes);\n  const [isLiked, setIsLiked] = useState(false);\n  const [results, setResults] = useState({});\n  const [todoResults, settodoResults] = useState({});\n  const [isDisliked, setIsDisliked] = useState(false);\n  const status = useSelector(state => state.likes.status);\n  const error = useSelector(state => state.likes.error);\n  const dispatch = useDispatch();\n  let todosData = [];\n  let content;\n  let likesData = {};\n  const location = useLocation();\n  const todoId = location.state.todoId;\n  useEffect(() => {\n    findTodo();\n    findLikesDislikeCurrentPage();\n  }, [status]);\n  const dataLikesDislikes = useSelector(state => {\n    likesData = state.likes;\n  });\n  const data = useSelector(state => {\n    todosData = state.todo;\n  });\n  let todoExists = {};\n  const findTodo = () => {\n    todoExists = todosData.data.find(todo => todo.todoId === todoId);\n  };\n  const findLikesDislikeCurrentPage = () => {\n    if (status === \"idle\") {\n      dispatch(fetchLikesDislikes());\n      dispatch(fetchTodo());\n    } else if (status === \"loading\") {\n      content = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this);\n    } else if (status === \"succeeded\") {\n      likesData.data.map((likes, i) => {\n        if (likes.tour_id === todoId) {\n          setResults({\n            likes: likes.likes,\n            dislikes: likes.dislikes,\n            todoId: likes.tour_id\n          });\n        }\n      });\n    } else if (status === \"failed\") {\n      content = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this);\n    }\n  };\n  const handleLike = async () => {\n    dispatch(incrementLike());\n    setIsLiked(true);\n    try {\n      await axios.post(\"http://localhost:5000/api/like\", {\n        likes,\n        results\n      });\n    } catch (error) {\n      console.error(\"Error liking the article\", error);\n    }\n  };\n  const handleDislike = async () => {\n    dispatch(incrementDislike());\n    setIsDisliked(true);\n    try {\n      await axios.post(\"http://localhost:5000/api/dislike\", {\n        dislikes,\n        results\n      });\n    } catch (error) {\n      console.error(\"Error disliking the article\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: likesData.isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading........\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLike,\n        disabled: isLiked || isDisliked,\n        children: [\"\\uD83D\\uDC4D \\u0425\\u0430\\u0440\\u0435\\u0441\\u0432\\u0430\\u043C \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: results.likes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 87\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDislike,\n        disabled: isLiked || isDisliked,\n        children: [\"\\uD83D\\uDC4E \\u041D\\u0435 \\u0445\\u0430\\u0440\\u0435\\u0441\\u0432\\u0430\\u043C \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: results.dislikes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(LikeDislike, \"h6Iv20Uar4a6ueepbfFPjMb1Gyc=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch, useLocation, useSelector, useSelector];\n});\n_c = LikeDislike;\nexport default LikeDislike;\nvar _c;\n$RefreshReg$(_c, \"LikeDislike\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","fetchLikesDislikes","incrementDislike","incrementLike","axios","fetchTodo","useLocation","jsxDEV","_jsxDEV","LikeDislike","articleId","_s","likes","dislikes","state","isLiked","setIsLiked","results","setResults","todoResults","settodoResults","isDisliked","setIsDisliked","status","error","dispatch","todosData","content","likesData","location","todoId","findTodo","findLikesDislikeCurrentPage","dataLikesDislikes","data","todo","todoExists","find","children","fileName","_jsxFileName","lineNumber","columnNumber","map","i","tour_id","handleLike","post","console","handleDislike","isLoading","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/dimitar/Documents/projects/my_project/upload_article/src/components/likeDislike.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {fetchLikesDislikes, incrementDislike, incrementLike} from \"../store/likesSlice/likesSlice\";\nimport axios from \"axios\";\nimport {fetchTodo} from \"../store/todoSlice/todoSlice\";\nimport {useLocation} from \"react-router-dom\";\n\nconst LikeDislike = ({articleId}) => {\n  const {likes, dislikes} = useSelector(state => state.likes);\n  const [isLiked, setIsLiked] = useState(false);\n  const [results, setResults] = useState({});\n  const [todoResults, settodoResults] = useState({});\n  const [isDisliked, setIsDisliked] = useState(false);\n  const status = useSelector((state) => state.likes.status);\n  const error = useSelector((state) => state.likes.error);\n  const dispatch = useDispatch();\n  let todosData = [];\n  let content;\n  let likesData = {};\n  const location = useLocation();\n  const todoId = location.state.todoId;\n  useEffect(() => {\n    findTodo();\n    findLikesDislikeCurrentPage();\n  }, [status]);\n  const dataLikesDislikes = useSelector((state) => {\n    likesData = state.likes;\n  });\n  const data = useSelector((state) => {\n    todosData = state.todo;\n  });\n  let todoExists = {};\n  const findTodo = () => {\n    todoExists = todosData.data.find(todo => todo.todoId === todoId);\n  };\n  const findLikesDislikeCurrentPage = () => {\n    if (status === \"idle\") {\n      dispatch(fetchLikesDislikes());\n      dispatch(fetchTodo());\n    } else if (status === \"loading\") {\n      content = <div>Loading...</div>;\n    } else if (status === \"succeeded\") {\n      likesData.data.map((likes, i) => {\n        if (likes.tour_id === todoId) {\n          setResults({\n            likes: likes.likes,\n            dislikes: likes.dislikes,\n            todoId: likes.tour_id\n          });\n        }\n      });\n    } else if (status === \"failed\") {\n      content = <div>{error}</div>;\n    }\n  };\n  const handleLike = async () => {\n    dispatch(incrementLike());\n    setIsLiked(true);\n    try {\n      await axios.post(\"http://localhost:5000/api/like\", {likes, results});\n    } catch (error) {\n      console.error(\"Error liking the article\", error);\n    }\n  };\n\n  const handleDislike = async () => {\n    dispatch(incrementDislike());\n    setIsDisliked(true);\n    try {\n      await axios.post(\"http://localhost:5000/api/dislike\", {dislikes, results});\n    } catch (error) {\n      console.error(\"Error disliking the article\", error);\n    }\n  };\n\n  return (\n    <div>\n      {\n        likesData.isLoading ? <div><h1>Loading........</h1></div> :\n          <div>\n            <button onClick={handleLike} disabled={isLiked || isDisliked}>üëç –•–∞—Ä–µ—Å–≤–∞–º <span>{results.likes}</span>\n            </button>\n            <button onClick={handleDislike} disabled={isLiked || isDisliked}>üëé –ù–µ\n              —Ö–∞—Ä–µ—Å–≤–∞–º <span>{results.dislikes}</span></button>\n          </div>\n      }\n    </div>\n  );\n};\n\nexport default LikeDislike;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}